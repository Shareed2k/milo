syntax = "proto3";

package internal;

service Master {
    rpc Join (JoinRequest) returns (JoinResponse) {}
    rpc GetRuleList (RuleListRequest) returns (RuleListResponse) {}
}

message JoinRequest {
    string token = 1;

    message Addr {
        string Ip = 1;
    }

    message Minion {
        repeated Addr PrivateAddrs = 1;
        repeated Addr PublicAddrs = 2;
    }

    Minion minion = 2;
}

message JoinResponse {
    string uuid = 1;
    string message = 2;
}

message RuleListRequest {
    string uuid = 1;
    int64 num = 2;
    string cursor = 3;
}


message RuleListResponse {

    message Rule {

    }

    repeated Rule Rules = 1;
    string Cursor = 2;
}